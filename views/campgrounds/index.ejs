<% layout('layouts/boilerplate')%>
<div id="cluster-map" class="mb-4"></div>
<div class="row mb-5">
    <div class="container mb-3">
        <div class="row">
            <h1 class="text-white col-3">Campgrounds</h1>
            <div class="col"></div>
            <form class="d-flex my-2 col-6" action="/campgrounds/" method="GET">
                <input class="form-control me-2" type="search" name="q" placeholder="Search" aria-label="Search">
                <button class="btn btn-secondary" type="submit">Search</button>
            </form>
        </div>
    </div>

    <% if (!campgrounds.length) { %>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Campground not found</h5>
                <p class="card-text">Try using some other text to search</p>
                <a href="/campgrounds" class="btn btn-secondary">Show all campgrounds</a>
            </div>
        </div>
    <% } else { %>
        <div class="infinite" id="infinite"></div>
    <% } %> 
</div>
<script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
    const campgrounds = { features: <%- JSON.stringify(campgrounds) %>}
</script>
<script src="/javascripts/infiniteScroll.js"></script>
<script src="/javascripts/clusterMap.js"></script>

